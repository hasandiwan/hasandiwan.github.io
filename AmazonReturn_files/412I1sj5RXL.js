(function(h){var m=window.AmazonUIPageJS||window.P,k=m._namespace||m.attributeErrors,c=k?k("REXPostReturnAssets",""):m;c.guardFatal?c.guardFatal(h)(c,window):c.execute(function(){h(c,window)})})(function(h,m,k){h.when("A","prep-modal-manager","stiti-pubsub","csm-publisher","prep-events-publisher","ready").execute(function(c,e,b,a,g){var d=!1;c.on("manageReturnSecondaryView:cancelReturnClicked",function(){var a=c.$(".cancel-return-modal-trigger").data("title");e.show("cancel-return-modal",c.$("#cancel-return-modal-trigger"),
{name:"cancel-return-modal",dataStrategy:"preload",header:a,width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")})});b.subscribe("cancelReturn:success",function(a){d=!0;g.publishForItem(a.associationId,"CancelReturnSecondaryView:Success")});b.subscribe("cancelReturn:failed",function(a){m.location.href=c.$("#cancel-return-modal-trigger-native-id").data("cancellationFailureRedirectUrl");g.publishForItem(a.associationId,"CancelReturnSecondaryView:Error")});b.subscribe("cancelReturn:goBack",
function(a){c.trigger("cancelReturnSecondaryView:goBack",{associationId:a.associationId})});b.subscribe("cancelReturn:submit",function(a){c.trigger("cancelReturnSecondaryView:submit",{associationId:a.associationId})});e.registerAfterHideListener("cancel-return-modal",function(){d&&(m.location.href=c.$("#cancel-return-modal-trigger-native-id").data("cancellationSuccessRedirectUrl"))})});"use strict";h.when("A","prep-modal-manager","stiti-pubsub","csm-publisher","prep-events-publisher","ready").execute(function(c,
e,b,a,g){var d={};c.$(".full-return-instructions-modal-trigger").each(function(a,b){a=c.$(b).data("packageId");d[a]=c.$(b).data("title")});b.subscribe("callToActionTextClick",function(f){if("returnInstructions"===f.eventType){var b=f.associationId,l=b+"-full-return-instructions-modal";e.show(l,c.$("#"+l+"-trigger"),{name:l,dataStrategy:"preload",header:d[b],width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")});g.publishForPackage(f.associationId,"ReturnInstructionsCard:SeeFullInstructions:Clicked");
a.incrementCsmCount("REX:PREP:ReturnInstructionsCard:SeeFullInstructions:Clicked")}});b.subscribe("shortInstructions:actionClicked",function(f){"changeReturnMethod"===f.eventType&&"fullInstructionsView"===f.position&&(c.trigger("fullInstructionsSecondaryView:changeReturnMethodClicked",{packageId:f.associationId}),a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:ChangeReturnMethod:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:ChangeReturnMethod:Clicked"));
"editPhone"===f.eventType&&"fullInstructionsView"===f.position&&(c.trigger("fullInstructionsSecondaryView:editPhoneClicked",{packageId:f.associationId}),a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:EditPhone:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:EditPhone:Clicked"));"editEmail"===f.eventType&&"fullInstructionsView"===f.position&&(c.trigger("fullInstructionsSecondaryView:editEmailClicked",{packageId:f.associationId}),
a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:EditEmail:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:EditEmail:Clicked"));"reschedule"===f.eventType&&"fullInstructionsView"===f.position&&(c.trigger("fullInstructionsSecondaryView:rescheduleClicked",{packageId:f.associationId}),a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:Reschedule:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:Reschedule:Clicked"));
"storeHours"===f.eventType&&"fullInstructionsView"===f.position&&(c.trigger("fullInstructionsSecondaryView:storeHoursClicked",{packageId:f.associationId}),a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:StoreHours:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:StoreHours:Clicked"));"promotionTermsAndConditions"===f.eventType&&"fullInstructionsView"===f.position&&(c.trigger("fullInstructionsSecondaryView:promotionTermsAndConditionsClicked",
{packageId:f.associationId}),a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:PromotionTermsAndConditions:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:PromotionTermsAndConditions:Clicked"));"seeLocations"===f.eventType&&"fullInstructionsView"===f.position&&(a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:SeeLocations:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:SeeLocations:Clicked"));
"seePrintInStoreLocations"===f.eventType&&"fullInstructionsView"===f.position&&(a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:seePrintInStoreLocations:Clicked"),g.publishForPackage(f.associationId,"FullInstructionsSecondaryView:ShortInstructions:seePrintInStoreLocations:Clicked"));"printLabel"===f.eventType&&"fullInstructionsView"===f.position&&(a.incrementCsmCount("REX:PREP:FullInstructionsSecondaryView:ShortInstructions:PrintLabel:Clicked"),g.publishForPackage(f.associationId,
"FullInstructionsSecondaryView:ShortInstructions:PrintLabel:Clicked"));"snailMail"===f.eventType&&"fullInstructionsView"===f.position&&c.trigger("returnInstructions:snailMailClicked",{packageId:f.associationId})})});"use strict";h.when("A","prep-modal-manager","stiti-pubsub","csm-publisher","prep-events-publisher","manage-return-content-handler","display-utils","ready").execute(function(c,e,b,a,g,d,f){function p(a,b){a+="-manage-return-modal";b||(b=h);w=b;0<c.$("#"+q).length&&f.hideElementById(q);
e.show(a,c.$("#"+a+"-trigger"),{name:a,dataStrategy:"preload",header:b,width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")})}var l=c.$(".manage-return-modal").data("packageId"),h=c.$(".manage-return-modal").data("manageReturnTitle"),k=c.$(".manage-return-modal").data("changeReturnMethodTitle"),r=c.$(".manage-return-modal").data("editPhoneTitle"),m=c.$(".manage-return-modal").data("editEmailTitle"),t=c.$(".manage-return-modal").data("rescheduleTitle"),A=l+"-manage-return-description",
x=l+"-change-return-method-description",y=l+"-edit-phone-description",z=l+"-edit-email-description",u=l+"-reschedule-description",q=l+"-prep-reschedule-button",w=h,n="";b.subscribe("callToActionButtonClick",function(b){"manageReturn"===b.eventType&&(d.updateDescription(A),p(b.associationId,h),0<c.$("#"+q).length&&(f.showElementById(q),a.incrementCsmCount("REX:PREP:ManageReturnSecondaryView:RescheduleReturnButton:Desktop:Shown")),a.incrementCsmCount("REX:PREP:ManageReturn:Clicked"),n="TrackerCard:ManageReturnCTA:")});
c.on("fullInstructionsSecondaryView:changeReturnMethodClicked",function(a){d.updateDescription(x);p(a.packageId,k);n="FullInstructionsSecondaryView:ShortInstructions:ChangeReturnMethod:"});c.on("returnInstructions:changeReturnMethodClicked",function(a){d.updateDescription(x);p(a.packageId,k);n="ReturnInstructionsCard:ShortInstructions:ChangeReturnMethod:"});c.on("fullInstructionsSecondaryView:editPhoneClicked",function(a){d.updateDescription(y);p(a.packageId,r);n="FullInstructionsSecondaryView:ShortInstructions:EditPhone:"});
c.on("returnInstructions:editPhoneClicked",function(a){d.updateDescription(y);p(a.packageId,r);n="ReturnInstructionsCard:ShortInstructions:EditPhone:"});c.on("fullInstructionsSecondaryView:editEmailClicked",function(a){d.updateDescription(z);p(a.packageId,m);n="FullInstructionsSecondaryView:ShortInstructions:EditEmail:"});c.on("returnInstructions:editEmailClicked",function(a){d.updateDescription(z);p(a.packageId,m);n="ReturnInstructionsCard:ShortInstructions:EditEmail:"});c.on("fullInstructionsSecondaryView:rescheduleClicked",
function(b){d.updateDescription(u);p(b.packageId,t);0<c.$("#"+q).length&&(f.hideElementById(u),f.showElementById(q),a.incrementCsmCount("REX:PREP:ManageReturnSecondaryView:RescheduleReturnButton:Desktop:Shown"));n="FullInstructionsSecondaryView:ShortInstructions:Reschedule:"});c.on("returnInstructions:rescheduleClicked",function(b){d.updateDescription(u);p(b.packageId,t);0<c.$("#"+q).length&&(f.hideElementById(u),f.showElementById(q),a.incrementCsmCount("REX:PREP:ManageReturnSecondaryView:RescheduleReturnButton:Desktop:Shown"));
n="ReturnInstructionsCard:ShortInstructions:Reschedule:"});c.on("cancelReturnSecondaryView:goBack",function(a){p(l,w);g.publishForItem(a.associationId,n+"CancelReturnSecondaryView:GoBack:Clicked")});c.on("cancelReturnSecondaryView:submit",function(a){g.publishForItem(a.associationId,n+"CancelReturnSecondaryView:Submit:Clicked")});b.subscribe("callToActionButtonClick",function(b){"cancelReturn"===b.eventType&&(c.trigger("manageReturnSecondaryView:cancelReturnClicked"),a.incrementCsmCount("REX:PREP:ManageReturnSecondaryView:CancelReturn:Clicked"),
g.publishForItem(b.associationId,n+"CancelReturnButton:Clicked"));"rescheduleReturn"===b.eventType&&(a.incrementCsmCount("REX:PREP:ManageReturnSecondaryView:RescheduleReturnButton:Desktop:Clicked"),g.publishForItem(b.associationId,n+"RescheduleReturnButton:Desktop:Clicked"))})});"use strict";h.when("A","csm-publisher","prep-modal-manager","stiti-pubsub","prep-events-publisher","ready").execute(function(c,e,b,a,g){function d(a,f){b.show(a,c.$("#"+a+"-trigger"),{name:a,dataStrategy:"preload",header:f,
width:600})}var f=c.$(".prep-enforcement-learn-more-modal").data("prepEnforcementLearnMoreTitle"),p=c.$(".prep-enforcement-return-profile-modal").data("prepEnforcementReturnProfileTitle");a.subscribe("prepEnforcement:actionClicked",function(a){"learnMore"===a.eventType?(d("prep-enforcement-learn-more-modal",f),e.incrementCsmCount("REX:PREPEnforcement:LearnMore:Clicked")):"knowMore"===a.eventType&&(d("prep-enforcement-learn-more-modal",f),e.incrementCsmCount("REX:PREPEnforcement:KnowMore:Clicked"))});
a.subscribe("shortInstructions:actionClicked",function(a){"learnMore"===a.eventType&&(d("prep-enforcement-learn-more-modal",f),e.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:Tips:LearnMore:Clicked"),g.publishForPackage(a.associationId,"ReturnInstructionsCard:ShortInstructions:Tips:LearnMore:Clicked"))});a.subscribe("prepEnforcement:actionClicked",function(a){"returnProfile"===a.eventType&&(d("prep-enforcement-return-profile-modal",p),e.incrementCsmCount("REX:PREPEnforcement:ReturnProfile:Clicked"))})});
"use strict";h.when("A","prep-modal-manager","csm-publisher","prep-events-publisher","ready").execute(function(c,e,b,a){c.declarative("return-item-images","click",function(g){g=g.data.packageId;var d=g+"-item-details-modal";b.incrementCsmCount("REX:PREP:ItemImages:Clicked");e.show(d,c.$("#"+d+"-trigger"),{name:d,dataStrategy:"preload",header:c.$("#"+d+"-trigger-native").data("title"),width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")});a.publishForPackage(g,"ItemImages:Clicked")})});
"use strict";h.when("A","a-modal").register("prep-modal-manager",function(c,e){var b={};return{show:function(a,c,d){var f=b[a];f?f.update({header:d.header}):(f=e.create(c,d),b[a]=f);f.show()},hide:function(a){(a=b[a])&&a.hide()},registerAfterHideListener:function(a,b){c.on("a:popover:afterHide:"+a,b)}}});"use strict";h.when("A","stiti-pubsub","csm-publisher","prep-events-publisher","prep-page-scroller","ready").execute(function(c,e,b,a,g){e.subscribe("callToActionButtonClick",function(a){"returnInstructions"===
a.eventType&&(g.scrollToElement(c.$("#"+a.associationId+"-return-instructions")),b.incrementCsmCount("REX:PREP:ReturnCode:Clicked"))});e.subscribe("shortInstructions:actionClicked",function(d){"changeReturnMethod"===d.eventType&&"mainView"===d.position&&(c.trigger("returnInstructions:changeReturnMethodClicked",{packageId:d.associationId}),b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:ChangeReturnMethod:Clicked"),a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:ChangeReturnMethod:Clicked"));
"editPhone"===d.eventType&&"mainView"===d.position&&(c.trigger("returnInstructions:editPhoneClicked",{packageId:d.associationId}),b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:EditPhone:Clicked"),a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:EditPhone:Clicked"));"editEmail"===d.eventType&&"mainView"===d.position&&(c.trigger("returnInstructions:editEmailClicked",{packageId:d.associationId}),b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:EditEmail:Clicked"),
a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:EditEmail:Clicked"));"reschedule"===d.eventType&&"mainView"===d.position&&(c.trigger("returnInstructions:rescheduleClicked",{packageId:d.associationId}),b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:Reschedule:Clicked"),a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:Reschedule:Clicked"));"storeHours"===d.eventType&&"mainView"===d.position&&(c.trigger("returnInstructions:storeHoursClicked",
{packageId:d.associationId}),b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:StoreHours:Clicked"),a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:StoreHours:Clicked"));"promotionTermsAndConditions"===d.eventType&&"mainView"===d.position&&(c.trigger("returnInstructions:promotionTermsAndConditionsClicked",{packageId:d.associationId}),b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:PromotionTermsAndConditions:Clicked"),a.publishForPackage(d.associationId,
"ReturnInstructionsCard:ShortInstructions:PromotionTermsAndConditions:Clicked"));"seeLocations"===d.eventType&&"mainView"===d.position&&(b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:SeeLocations:Clicked"),a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:SeeLocations:Clicked"));"seePrintInStoreLocations"===d.eventType&&"mainView"===d.position&&(b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:seePrintInStoreLocations:Clicked"),
a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:seePrintInStoreLocations:Clicked"));"printLabel"===d.eventType&&"mainView"===d.position&&(b.incrementCsmCount("REX:PREP:ReturnInstructionsCard:ShortInstructions:PrintLabel:Clicked"),a.publishForPackage(d.associationId,"ReturnInstructionsCard:ShortInstructions:PrintLabel:Clicked"));"snailMail"===d.eventType&&"mainView"===d.position&&c.trigger("returnInstructions:snailMailClicked",{packageId:d.associationId})})});"use strict";
h.when("A","prep-modal-manager","stiti-pubsub","csm-publisher","prep-events-publisher","ready").execute(function(c,e,b,a,g){function d(a){var d=a+"-track-return-modal";e.show(d,c.$("#"+d+"-trigger"),{name:d,dataStrategy:"preload",header:f[a],width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")});e.registerAfterHideListener(d,function(){b.publish("verticalTracker:closed",{})})}var f={};c.$(".track-return-modal-trigger").each(function(a,b){a=c.$(b).data("packageId");f[a]=
c.$(b).data("title")});c.declarative("horizontal-milestone-tracker","click",function(f){d(f.data.packageId);c.on("a:popover:afterShow:"+(f.data.packageId+"-track-return-modal"),function(){b.publish("horizontalTracker:Clicked",{})});a.incrementCsmCount("REX:PREP:TrackerCard:HorizontalTracker:Clicked");g.publishForPackage(f.data.packageId,"TrackerCard:HorizontalTracker:Clicked")});b.subscribe("latestTrackingMessage:refundNotReceivedHelperClicked",function(c){d(c.associationId);a.incrementCsmCount("REX:PREP:TrackerCard:LatestTrackingMessage:RefundNotReceivedHelper:Clicked");
g.publishForPackage(c.associationId,"TrackerCard:LatestTrackingMessage:RefundNotReceivedHelper:Clicked")})});"use strict";h.when("A","ready").execute("prep-red-data-handler",function(c){c.$(".red-data-field").each(function(e,b){e=c.$(b);b=e.data("associationId");var a=e.data("fieldType");b&&(a=a+"-"+b);b=c.$("#"+a).html();e.html(b)})});"use strict";h.when("A").register("manage-return-content-handler",function(c){return{updateDescription:function(e){c.$(".manage-return-description-section").addClass("aok-hidden");
c.$("#"+e).removeClass("aok-hidden")}}});"use strict";h.when("A","prep-modal-manager","ready").execute(function(c,e){function b(b){var d=b+"-store-info-modal";e.show(d,c.$("#"+d+"-trigger"),{name:d,dataStrategy:"preload",header:a[b],width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")})}var a={};c.$(".store-info-modal-trigger").each(function(b,d){b=c.$(d).data("packageId");a[b]=c.$(d).data("title")});c.on("fullInstructionsSecondaryView:storeHoursClicked",function(a){b(a.packageId)});
c.on("returnInstructions:storeHoursClicked",function(a){b(a.packageId)})});"use strict";h.when("A","prep-modal-manager","ready").execute(function(c,e){function b(b){var d=b+"-plan-promotion-terms-and-conditions-modal";e.show(d,c.$("#"+d+"-trigger"),{name:d,dataStrategy:"preload",header:a[b],width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")})}var a={};c.$(".plan-promotion-terms-and-conditions-modal-trigger").each(function(b,d){b=c.$(d).data("packageId");a[b]=c.$(d).data("title")});
c.on("fullInstructionsSecondaryView:promotionTermsAndConditionsClicked",function(a){b(a.packageId)});c.on("returnInstructions:promotionTermsAndConditionsClicked",function(a){b(a.packageId)})});"use strict";h.when("A","prep-modal-manager","stiti-pubsub","csm-publisher","prep-events-publisher","ready").execute(function(c,e,b,a,g){function d(a){a+="-snail-mail-modal";var b=c.$(".snail-mail-modal-trigger").data("title");e.show(a,c.$("#"+a+"-trigger"),{name:a,dataStrategy:"preload",header:b,width:600,
closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")})}b.subscribe("callToActionButtonClick",function(b){if("printReturnLabel"===b.eventType)a.incrementCsmCount("REX:PREP:ReturnLabel:PrintLabel:Clicked");else if("shareLabel"===b.eventType){b=b.associationId+"-share-label-modal";var d=c.$(".share-label-modal-trigger").data("title");e.show(b,c.$("#"+b+"-trigger"),{name:b,dataStrategy:"preload",header:d,width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")});
a.incrementCsmCount("REX:PREP:ReturnLabel:ShareLabel:Clicked")}});b.subscribe("ReturnLabel:SnailMail:Clicked",function(b){d(b.associationId);a.incrementCsmCount("REX:PREP:ReturnLabel:SnailMail:Clicked")});b.subscribe("snailMail:goBack",function(a){e.hide(a.associationId+"-snail-mail-modal")});b.subscribe("ReturnLabel:emailSendToMe",function(b){g.publishForPackage(b.associationId,"'ReturnLabel:emailSendToMe");a.incrementCsmCount("REX:PREP:ReturnLabel:emailSendToMe")});b.subscribe("ReturnLabel:emailSendToFriend",
function(b){g.publishForPackage(b.associationId,"ReturnLabel:emailSendToFriend");a.incrementCsmCount("REX:PREP:ReturnLabel:emailSendToFriend")});c.on("returnInstructions:snailMailClicked",function(a){d(a.packageId)})});"use strict";h.when("A","ready").execute(function(c){function e(){c.$(".return-instructions-main-view").height("100%");c.$(".return-instructions-main-view+.return-label-main-view").height("100%");var b=c.$(".return-instructions-main-view").height(),a=c.$(".return-instructions-main-view+.return-label-main-view").height(),
b=Math.max(a,b);c.$(".return-instructions-main-view").height(b)}e();c.on("a:expander:return-instructions-expander:toggle:expand",function(b){e()})});"use strict";h.when("A","ready").register("prep-page-scroller",function(c){var e=!1;return{scrollToElement:function(b){b&&!e&&(e=!0,c.$("html, body").animate({scrollTop:b.offset().top},600,function(){e=!1}))}}});"use strict";h.when("A","stiti-pubsub","prep-modal-manager","csm-publisher","prep-events-publisher","ready").execute(function(c,e,b,a,g){e.subscribe("callToActionButtonClick",
function(d){if("showContactBrand"===d.eventType){d=d.associationId;var f=d+"-contact-brand-modal";a.incrementCsmCount("REX:PREP:ContactBrand:Clicked");b.show(f,c.$("#"+f+"-trigger"),{name:f,dataStrategy:"preload",header:c.$("#"+f+"-trigger-native").data("title"),width:600,closeButtonLabel:c.$(".prep-page-container").data("modalCloseMessage")});g.publishForPackage(d,"ContactBrand:Clicked")}})});"use strict";h.when("A","stiti-pubsub","csm-publisher","prep-page-scroller","ready").execute(function(c,
e,b,a){e.subscribe("callToActionButtonClick",function(e){"curbsideReturn"===e.eventType&&(a.scrollToElement(c.$("#"+e.associationId+"-curbside-checkin")),b.incrementCsmCount("REX:PREP:CurbsideReturnCTA:Clicked"))})});"use strict";h.when("A","page-state-utils").register("prep-data",function(c,e){return{getCommonPageData:function(){return c.state("commonPageData")},getCommonPageDataForKey:function(b){return e.getValue("commonPageData",b)},getPackageData:function(b){return e.getValue("packagesEventData",
b)},getItemData:function(b){return e.getValue("itemsEventData",b)}}});"use strict";h.when("A","prep-data","prex-event-publisher","csm-publisher","prex-logger","ready").register("prep-events-publisher",function(c,e,b,a,g){function d(a,b,c){var d=e.getCommonPageData();if(a=e.getPackageData(a)){b={eventName:b,contractId:d.contractId,refTag:d.refTag,subPageType:d.subPageType,transPlanId:a.transPlanId,rmaId:a.rmaId};a:switch(c){case "returnStage":d=a.latestCompletedMilestone;break a;case "abuseRiskLevel":d=
a.abuseRiskLevel;break a;default:d=void 0}c&&d&&(b.dataKey=c,b.dataValue=d);return b}}return{publishForPackage:function(c,e){try{var h=d(c,e,"returnStage");h&&b.publishEvent(h)}catch(k){a.incrementCsmCount("REX:PREP:PackageEventPublish:Error"),g.error("Error publishing events for package","prep_package_events",k)}},publishForItem:function(d,h){try{var l;var k=e.getCommonPageData(),m=Object.values(c.state("packagesEventData"))[0],r=e.getItemData(d);if(r){var v={eventName:h,contractId:k.contractId,
refTag:k.refTag,subPageType:k.subPageType,orderId:r.orderId,itemId:r.lineItemId,shipmentId:r.shipmentId,dataKey:"returnStage",dataValue:m.latestCompletedMilestone};m&&(v.transPlanId=m.transPlanId,v.rmaId=m.rmaId);l=v}else l=void 0;l&&b.publishEvent(l)}catch(t){a.incrementCsmCount("REX:PREP:ItemEventPublish:Error"),g.error("Error publishing events for item","prep_item_events",t)}},publishForPackageWithAbuseSignal:function(c,e){try{var h=d(c,e,"abuseRiskLevel");h&&b.publishEvent(h)}catch(k){a.incrementCsmCount("REX:PREP:PublishForPackageWithAbuseSignal:Error"),
g.error("Error publishing events for package with abuse signal","prep_package_events",k)}}}});"use strict";h.when("A","prep-events-publisher","stiti-pubsub","ready").execute(function(c,e,b){b.subscribe("callToActionButtonClick",function(a){"manageReturn"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:ManageReturnCTA:Clicked")});b.subscribe("callToActionButtonClick",function(a){"returnInstructions"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:ReturnCodeCTA:Clicked")});
b.subscribe("callToActionButtonClick",function(a){"returnInvoice"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:ReturnInvoiceCTA:Clicked")});b.subscribe("callToActionButtonClick",function(a){"trackPackage"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:TrackPackageCTA:Clicked")});b.subscribe("callToActionButtonClick",function(a){"writeReview"===a.eventType&&e.publishForItem(a.associationId,"HeaderSection:ItemDetailsSecondaryView:WriteReviewCTA:Clicked")});b.subscribe("invoice:viewInvoice",
function(a){e.publishForPackage(a.associationId,"Invoice:ViewInvoice:Clicked")});b.subscribe("returnCode:downloadButton:clicked",function(a){a.eventType!==k&&"returnInstructionsCard:returnCode:downloadButton"!==a.eventType&&""!==a.eventType||e.publishForPackage(a.associationId,"ReturnInstructionsCard:ReturnCodeDownloadButton:Clicked")});b.subscribe("returnCode:downloadButton:clicked",function(a){"trackerCard:returnCode:downloadButton"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:ReturnCodeDownloadButton:Clicked")});
b.subscribe("latestTrackingMessage:infoIconClicked",function(a){e.publishForPackage(a.associationId,"TrackerCard:LatestTrackingMessageInfoIcon:Clicked")});b.subscribe("latestTrackingMessage:infoIconHover",function(a){e.publishForPackage(a.associationId,"TrackerCard:LatestTrackingMessageInfoIcon:Hovered")});b.subscribe("prepEnforcement:actionClicked",function(a){"learnMore"===a.eventType&&e.publishForPackageWithAbuseSignal(a.associationId,"PREPEnforcement:LearnMore:Clicked")});b.subscribe("prepEnforcement:actionClicked",
function(a){"returnProfile"===a.eventType&&e.publishForPackageWithAbuseSignal(a.associationId,"PREPEnforcement:ReturnProfile:Clicked")});b.subscribe("callToActionButtonClick",function(a){"trackerCard:printReturnLabel"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:PrintReturnLabelButton:Clicked")});b.subscribe("callToActionButtonClick",function(a){"trackerCard:shareLabel"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:ShareLabelButton:Clicked")});b.subscribe("ReturnLabel:SnailMail:Clicked",
function(a){"trackerCard:snailMail:clicked"===a.eventType&&e.publishForPackage(a.associationId,"TrackerCard:SnailMail:Clicked")});b.subscribe("ReturnLabel:SnailMail:Clicked",function(a){a.eventType!==k&&"returnInstructionsCard:snailMail:clicked"!==a.eventType&&""!==a.eventType||e.publishForPackage(a.associationId,"ReturnLabel:SnailMail:Clicked")});b.subscribe("callToActionButtonClick",function(a){a.eventType!==k&&"printReturnLabel"!==a.eventType&&""!==a.eventType||e.publishForPackage(a.associationId,
"ReturnLabel:PrintLabel:Clicked")});b.subscribe("callToActionButtonClick",function(a){a.eventType!==k&&"shareLabel"!==a.eventType&&""!==a.eventType||e.publishForPackage(a.associationId,"ReturnLabel:ShareLabel:Clicked")})})});