(function(d){var h=window.AmazonUIPageJS||window.P,f=h._namespace||h.attributeErrors,g=f?f("PREXWebAppBuzzAssets@stitiJS","PREXWebApp"):h;g.guardFatal?g.guardFatal(d)(g,window):g.execute(function(){d(g,window)})})(function(d,h,f){(function(){var g=function(){function b(a){this._registeredActorsMap={};this._registeredCallbacks={};this._interactionStrategies={};this.dataStore=a}b.prototype.publish=function(a,e){this.publishEventToRegisteredActors(this._registeredActorsMap[a],e);this.publishEventToRegisteredCallbacks(this._registeredCallbacks[a],
e)};b.prototype.publishEventToRegisteredActors=function(a,e){var c=this;a&&a.forEach(function(a){if(!e.associationId||!a.associationId||e.associationId===a.associationId){var b=a.action(e,c.dataStore,a.associationId);b&&a.actorBehavior.performAction(b,a.associationId)}})};b.prototype.publishEventToRegisteredCallbacks=function(a,e){a&&a.forEach(function(a){return a(e)})};b.prototype.registerActor=function(a){var e=this,b=a.actorConfiguration.interactions;b&&b.forEach(function(b){return e.registerInteraction(b,
a)});var b=a.actorBehavior.dataKeys,k=a.actorBehavior.dataStore;b&&b.forEach(function(a){return e.dataStore._updateDataKey(a,k)})};b.prototype.registerInteraction=function(a,b){var c=a.eventName,k={action:a.evaluateAction,actorBehavior:b.actorBehavior,associationId:b.associationId};b=c+"-"+b.configurationId;"sameForAll"!==this._interactionStrategies[b]&&(this.registerInteractionStrategy(a,b),this._registeredActorsMap.hasOwnProperty(c)||(this._registeredActorsMap[c]=[]),this._registeredActorsMap[c].push(k))};
b.prototype.registerInteractionStrategy=function(a,b){this._interactionStrategies[b]=a.strategy?a.strategy:"differentForAll"};b.prototype.subscribe=function(a,b){this._registeredCallbacks.hasOwnProperty(a)||(this._registeredCallbacks[a]=[]);this._registeredCallbacks[a].push(b)};return b}(),h=function(){function b(a,b){var c=this;this.actorConfigurationInits=[];this.actionBehaviorInits=[];this.update=function(a){c.registerActors(a.find(".stiti-actor"))};this.A=a;this.pubsub=b;this.actorInstanceIds=
[]}b.prototype.init=function(){this.registerActors(this.A.$(".stiti-actor"))};b.prototype.registerActors=function(a){var b=this;this.resetInits();a.each(function(a,d){return b.registerActor(d)});setTimeout(function(){b.actorConfigurationInits.forEach(function(a){return a()});b.actionBehaviorInits.forEach(function(a){return a()})},50)};b.prototype.resetInits=function(){this.actorConfigurationInits=[];this.actionBehaviorInits=[]};b.prototype.registerActor=function(a){var b=this;a=this.A.$(a);var c=
a.data("actorConfigurationId"),g=a.data("actorBehaviorId"),h=a.data("associationId"),f=a.data("instanceId");-1===this.actorInstanceIds.indexOf(f)&&(this.actorInstanceIds.push(f),d.when(c,g).execute(function(a,d){b.pubsub.registerActor({actorConfiguration:a,actorBehavior:d,associationId:h,id:f,configurationId:c});a.init&&b.actorConfigurationInits.push(a.init);d.init&&b.actionBehaviorInits.push(d.init)}))};b.prototype.updateAssets=function(a){this.A.$("#widget-assets-section").append(a)};b.prototype.getLoadedAssets=
function(){var a=this;return this.A.$(".wiget-assets").map(function(b,c){return a.A.$(c).data("assetId")}).toArray()};return b}(),f=function(){function b(){this.dataKeyMap={}}b.prototype.getData=function(a,b){var c=this.dataKeyMap[a];return c?c.get(a,b):null};b.prototype._updateDataKey=function(a,b){return this.dataKeyMap[a]=b};return b}();d.register("stiti-data-store",function(){return new f});d.when("stiti-data-store").register("stiti-pubsub",function(b){return new g(b)});d.when("A","stiti-pubsub").register("stiti-js",
function(b,a){return new h(b,a)});d.when("stiti-js","load").execute(function(b){return b.init()})})()});