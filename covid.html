<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="//cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <title>COVID vaccination rates</title>
  </head>
  <body>
    <div class="table-responsive">
      <table class="table">
	<thead>
	  <th>Country</th><th>Jab count</th>
	</thead>
	<tbody>
	</tbody>
      </table>
    </div>
    <script src="//cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
    <script src="//cdn.jsdelivr.net/npm/papaparse@5.3.1/papaparse.min.js" integrity="sha256-tDf9H6Pr0oXtuyG0hGdMQ5OU5EuM5IK8WMK2iTbdvd0=" crossorigin="anonymous"></script>
    <script src="//d3js.org/d3.v7.min.js" integrity="sha384-dwAoaZEF6fuLEIxibVwiAZQuxtQkCpu+3TvgeO4CwrGkyXrIRHTJccaSbJkfShFs" crossorigin="anonymous"></script>
    <script>
      $(document).ready(function() {
	  Papa.parse('//covid.ourworldindata.org/data/owid-covid-data.csv', {
	      download: true, header: true, dynamicTyping: true, worker: true, complete: function(results, file) {
		  //iso_code,continent,location,date,total_cases,new_cases,new_cases_smoothed,total_deaths,new_deaths,new_deaths_smoothed,total_cases_per_million,new_cases_per_million,new_cases_smoothed_per_million,total_deaths_per_million,new_deaths_per_million,new_deaths_smoothed_per_million,reproduction_rate,icu_patients,icu_patients_per_million,hosp_patients,hosp_patients_per_million,weekly_icu_admissions,weekly_icu_admissions_per_million,weekly_hosp_admissions,weekly_hosp_admissions_per_million,new_tests,total_tests,total_tests_per_thousand,new_tests_per_thousand,new_tests_smoothed,new_tests_smoothed_per_thousand,positive_rate,tests_per_case,tests_units,total_vaccinations,people_vaccinated,people_fully_vaccinated,total_boosters,new_vaccinations,new_vaccinations_smoothed,total_vaccinations_per_hundred,people_vaccinated_per_hundred,people_fully_vaccinated_per_hundred,total_boosters_per_hundred,new_vaccinations_smoothed_per_million,stringency_index,population,population_density,median_age,aged_65_older,aged_70_older,gdp_per_capita,extreme_poverty,cardiovasc_death_rate,diabetes_prevalence,female_smokers,male_smokers,handwashing_facilities,hospital_beds_per_thousand,life_expectancy,human_development_index,excess_mortality
		  $.each('results.data', function(i, v) {
		      // AFG,Asia,Afghanistan,2020-02-24,1.0,1.0,,,,,0.025,0.025,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,8.33,39835428.0,54.422,18.6,2.581,1.337,1803.987,,597.029,9.59,,,37.746,0.5,64.83,0.511
		      today = new Date().toISOString().split('T')[0];
		      if (v.date === today) {
			  $('tbody').append('<tr><td>'+v.location+'</td></td>'+v.total_cases+'</td></tr>');
		      }
		  });
	      }});
      });
      </script>
  </body>
</html>
